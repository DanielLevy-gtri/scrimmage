

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Design Principles &mdash; scrimmage 0.2.0-dev documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Change Log" href="changelog.html" />
    <link rel="prev" title="Variable IO" href="variableio.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> scrimmage
          

          
          </a>

          
            
            
              <div class="version">
                0.2.0-dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="overview.html">Overview</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="intro.html">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="viewer.html">Viewer Controls</a></li>
<li class="toctree-l2"><a class="reference internal" href="workflow.html">Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="environment-vars.html">Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="coordinate-frames.html">Coordinate Frames</a></li>
<li class="toctree-l2"><a class="reference internal" href="core-plugins.html">Core Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="xml-tags.html">Mission XML Tag Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="variableio.html">Variable IO</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Design Principles</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#entity-state-vs-state-truth">Entity state() vs state_truth()</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#testing-a-real-ins-system">Testing a Real INS System</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#noisy-contacts">Noisy Contacts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html">Change Log</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorials.html">Tutorials</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">scrimmage</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="overview.html">Overview</a> &raquo;</li>
        
      <li>Design Principles</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/overview/design-principles.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="design-principles">
<h1>Design Principles<a class="headerlink" href="#design-principles" title="Permalink to this headline">¶</a></h1>
<div class="section" id="entity-state-vs-state-truth">
<h2>Entity state() vs state_truth()<a class="headerlink" href="#entity-state-vs-state-truth" title="Permalink to this headline">¶</a></h2>
<p>The purpose of the separate <code class="docutils literal notranslate"><span class="pre">state()</span></code> and <code class="docutils literal notranslate"><span class="pre">state_truth()</span></code> shared pointers
is to allow the researcher to simulate the effects of introducing noise into
the entity’s own position, velocity, orientation, etc. When the researcher is
not concerned with introducing state noise, the <code class="docutils literal notranslate"><span class="pre">state()</span></code> and
<code class="docutils literal notranslate"><span class="pre">state_truth()</span></code> pointers point to the same memory location. However, if the
researcher wants to introduce state noise, a sensor plugin can be used to
create a new state pointer instance and assign the pointers appropriately. For
example, in the <code class="docutils literal notranslate"><span class="pre">init()</span></code> function of the <code class="docutils literal notranslate"><span class="pre">SimpleINS</span></code> plugin, the following
code creates a new State pointer to hold noisy state information:</p>
<div class="highlight-c++ notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Create a new State instance</span>
<span class="n">parent_</span><span class="o">-&gt;</span><span class="n">state</span><span class="p">()</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">State</span><span class="o">&gt;</span><span class="p">();</span>

<span class="c1">// Initialize the new state&#39;s values with the ground truth values</span>
<span class="o">*</span><span class="p">(</span><span class="n">parent_</span><span class="o">-&gt;</span><span class="n">state</span><span class="p">())</span> <span class="o">=</span> <span class="o">*</span><span class="p">(</span><span class="n">parent_</span><span class="o">-&gt;</span><span class="n">state_truth</span><span class="p">());</span>
</pre></div>
</td></tr></table></div>
<p>In the <code class="docutils literal notranslate"><span class="pre">step()</span></code> function, the plugin copies the <code class="docutils literal notranslate"><span class="pre">state_truth()</span></code> pointer,</p>
<div class="highlight-c++ notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">StateWithCovariance</span> <span class="nf">ns</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">parent_</span><span class="o">-&gt;</span><span class="n">state_truth</span><span class="p">()));</span>
</pre></div>
</td></tr></table></div>
<p>adds noise to the copied state values, and then assigns the <code class="docutils literal notranslate"><span class="pre">state()</span></code> pointer
with the noisy values:</p>
<div class="highlight-c++ notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">*</span><span class="p">(</span><span class="n">parent_</span><span class="o">-&gt;</span><span class="n">state</span><span class="p">())</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">sc</span><span class="o">::</span><span class="n">State</span><span class="o">&gt;</span><span class="p">(</span><span class="n">msg</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p>This allows the autonomy and controller plugins to only have to consider the
<code class="docutils literal notranslate"><span class="pre">state_</span></code> pointer without having to consider whether ground truth or noisy
state information is being used in the simulation. However, the developer has
to determine whether they need to access the possibly noisy <code class="docutils literal notranslate"><span class="pre">state()</span></code> or the
<code class="docutils literal notranslate"><span class="pre">state_truth()</span></code> pointers when writing sensor, interaction, metric, and
network plugins. Motion model plugins only need to consider the <code class="docutils literal notranslate"><span class="pre">state_</span></code>
pointer since they are always initialized with the <code class="docutils literal notranslate"><span class="pre">ground_truth_</span></code> pointer in
<code class="docutils literal notranslate"><span class="pre">Entity.cpp</span></code>.</p>
<div class="section" id="testing-a-real-ins-system">
<h3>Testing a Real INS System<a class="headerlink" href="#testing-a-real-ins-system" title="Permalink to this headline">¶</a></h3>
<p>A real inertial navigation system (INS) will take inputs from GPS, LIDAR,
accelerometers, and gyroscopes. If the researcher wants to develop and simulate
an INS implementation, GPS, LIDAR, accelerometer, and gyroscope sensor plugins
should be configured to publish their respective data to an INS sensor
plugin. The INS sensor plugin should be the only the sensor plugin that makes
and reassigns the <code class="docutils literal notranslate"><span class="pre">state()</span></code> pointer in its <code class="docutils literal notranslate"><span class="pre">init()</span></code> function. After each
step of the INS sensor plugin, it should assign the <code class="docutils literal notranslate"><span class="pre">state()</span></code> pointer with
its best estimate of the entity’s state. This will allow the entity’s autonomy
and controller plugins to use this best estimated state for later calculations.</p>
</div>
</div>
<div class="section" id="noisy-contacts">
<h2>Noisy Contacts<a class="headerlink" href="#noisy-contacts" title="Permalink to this headline">¶</a></h2>
<p>For now, the developer can use the NoisyContacts sensor plugin. However, we
will soon be developing a noisy / ground truth interface to contacts that is
similar to the entity’s interface.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="changelog.html" class="btn btn-neutral float-right" title="Change Log" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="variableio.html" class="btn btn-neutral float-left" title="Variable IO" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Kevin DeMarco

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>