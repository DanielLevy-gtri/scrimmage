

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>AirSimSensor Plugin Setup &mdash; scrimmage 0.2.0-dev documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Create an OpenAI Plugin" href="openai-plugin.html" />
    <link rel="prev" title="Create a ROS Node" href="ros-plugin.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> scrimmage
          

          
          </a>

          
            
            
              <div class="version">
                0.2.0-dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview/overview.html">Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="tutorials.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="xml-discovery.html">SCRIMMAGE Plugin / XML File Discovery</a></li>
<li class="toctree-l2"><a class="reference internal" href="multiple-local-runs.html">Multiple Runs on a Local Computer</a></li>
<li class="toctree-l2"><a class="reference internal" href="create-project.html">Create a SCRIMMAGE Plugins Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="autonomy-plugin.html">Create an Autonomy Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="draw-shapes.html">Draw Shapes in the Viewer</a></li>
<li class="toctree-l2"><a class="reference internal" href="sensor-plugin.html">Create a Sensor Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="controller-plugin.html">Create a Controller Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="motion-model-plugin.html">Create a Motion Model Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="entity-interaction-plugin.html">Create an Entity Interaction Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="metrics-plugin.html">Create a Metrics Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="parameters.html">Plugin Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="pub-sub.html">Publishers and Subscribers</a></li>
<li class="toctree-l2"><a class="reference internal" href="gen-entities.html">Generate Entities at Run-Time</a></li>
<li class="toctree-l2"><a class="reference internal" href="ros-plugin.html">Create a ROS Node</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">AirSimSensor Plugin Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#linux-system-setup">Linux System Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#windows-linux-setup">Windows / Linux Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#linux">Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="#windows">Windows</a></li>
<li class="toctree-l4"><a class="reference internal" href="#start-scrimmage-on-linux-and-connect-to-airsim-unreal-on-windows">Start Scrimmage on Linux and Connect to AirSim/Unreal on Windows</a></li>
<li class="toctree-l4"><a class="reference internal" href="#save-images-and-get-lidar-data">Save Images and Get LIDAR data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#add-asset-environments">Add “Asset” Environments</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="openai-plugin.html">Create an OpenAI Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="optimize.html">Optimizing Parameters in SCRIMMAGE</a></li>
<li class="toctree-l2"><a class="reference internal" href="open-grid.html">Multiple Runs with Open Grid Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="test.html">Create a SCRIMMAGE Test</a></li>
<li class="toctree-l2"><a class="reference internal" href="utilities.html">Useful Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="simcontrol.html">SimControl API</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">scrimmage</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="tutorials.html">Tutorials</a> &raquo;</li>
        
      <li>AirSimSensor Plugin Setup</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/tutorials/airsim-plugin.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="airsimsensor-plugin-setup">
<span id="airsim-plugin"></span><h1>AirSimSensor Plugin Setup<a class="headerlink" href="#airsimsensor-plugin-setup" title="Permalink to this headline">¶</a></h1>
<p>SCRIMMAGE provides a sensor plugin that communicates over AirSim’s RPC protocol
to set the position and orientation of an entity in AirSim and retrieve the
camera images generated by AirSim. The <code class="docutils literal notranslate"><span class="pre">quad-airsim-ex1.xml</span></code> mission file
provides an example for configuring SCRIMMAGE to use the AirSimSensor plugin
with a SCRIMMAGE entity. An example of extracting the image data from the
Sensor is provided in the Straight Autonomy plugin in the Straight.cpp file.</p>
<div class="section" id="linux-system-setup">
<h2>Linux System Setup<a class="headerlink" href="#linux-system-setup" title="Permalink to this headline">¶</a></h2>
<p>In order to run SCRIMMAGE and AirSim / Unreal on Linux, we will have to build
Unreal and AirSim from source. Some of the following directions were taken from
AirSim’s build_linux.md documentation, but they are placed here for posterity.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Unreal Engine uses libc++ while SCRIMMAGE uses libstdc++. You
cannot easily link binaries that are built from one library with
binaries that were built with the other library. The simplest way of
dealing with this issue is to build the AirSim libraries/plugins in
two different directories.</p>
</div>
<ol class="arabic">
<li><p><strong>Make sure you are registered with</strong> <a class="reference external" href="https://docs.unrealengine.com/latest/INT/Platforms/Linux/BeginnerLinuxDeveloper/SettingUpAnUnrealWorkflow/1/index.html">Epic Games</a>. <strong>This is required to get
source code access for Unreal engine.</strong></p></li>
<li><p><strong>Clone Unreal in your favorite folder and build it (this may take a
while!). Note: We only support Unreal 4.16 and newer.</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># go to folder where you clone GitHub projects</span>
git clone -b <span class="m">4</span>.17 https://github.com/EpicGames/UnrealEngine.git
<span class="nb">cd</span> UnrealEngine
<span class="c1"># few times Epic folks broke the build so we will get commit that works</span>
git checkout af96417313a908b20621a443175ba91683c238c8
./Setup.sh
./GenerateProjectFiles.sh
make
</pre></div>
</div>
</li>
<li><p><strong>Build the libstdc++ version of AirSim (which will be loaded into SCRIMMAGE)</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># go to folder where you clone GitHub projects</span>
git clone https://github.com/Microsoft/AirSim.git
<span class="nb">cd</span> AirSim
git checkout v1.1.8
git apply /path/to/scrimmage/3rd-party/patches/airsim_build_updates.patch
./setup.sh
<span class="nb">cd</span> cmake
chmod +x gcc_build.sh
./gcc_build.sh
</pre></div>
</div>
</li>
<li><p><strong>Build the libc++ version of AirSim (which will be loaded into Unreal)</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># go to folder where you clone GitHub projects</span>
git clone https://github.com/Microsoft/AirSim.git AirSim-plugin
<span class="nb">cd</span> AirSim-plugin
git checkout v1.1.8
./setup.sh
./build.sh
</pre></div>
</div>
</li>
<li><p><strong>Build SCRIMMAGE’s AirSimSensor Plugin</strong></p>
<p>Make sure you have OpenCV installed on your system and that you have
successfully built the AirSim libraries (using libstdc++) in step 3. Go to
your scrimmage build directory and provide the location of the AirSim
libraries (libstdc++ version) to cmake.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /path/to/scrimmage
rm -rf build <span class="o">&amp;&amp;</span> mkdir build <span class="o">&amp;&amp;</span> <span class="nb">cd</span> build
cmake .. -DAIRSIM_ROOT_SEARCH<span class="o">=</span>/path/to/AirSim
make
</pre></div>
</div>
<p>Ensure that the <code class="docutils literal notranslate"><span class="pre">AirSimSensor_plugin</span></code> target built successfully.</p>
</li>
<li><p><strong>Open the Blocks Environment in Unreal</strong></p>
<p>Go to the UnrealEngine repository that you cloned and run the UE4Editor
binary that was built.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /path/to/UnrealEngine
./Engine/Binaries/Linux/UE4Editor
</pre></div>
</div>
<p>Use the UE4Editor to open the Blocks project (Blocks.uproject) in the
/path/to/AirSim-plugin/Unreal/Environments/Blocks directory. You will
probably be prompted about updating the project version, say “Yes” to
update. Now we have to sync the AirSim plugin with this updated project
version. Close the project and UE4Editor and open a terminal.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /path/to/AirSim-plugin
rsync -t -r Unreal/Plugins ./Unreal/Environments/Blocks<span class="se">\ </span>Blocks <span class="m">4</span>.17
</pre></div>
</div>
<p>Run the UE4Editor binary again and open the new Blocks 4.17 project. When
you hit the “Play” button in the project, you should see a quadrotor appear
on the screen and it may start flying around.</p>
</li>
<li><p><strong>Configure Settings</strong></p>
<p>AirSim reads a json file located at ~/Documents/AirSim/settings.json to
configure itself. SCRIMMAGE provides an example json file. After running
AirSim one time, it will create the json file. Let’s remove it and link to
the one provided by SCRIMMAGE.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rm ~/Documents/AirSim/settings.json
<span class="nb">cd</span> ~/Documents/AirSim
ln -s /path/to/scrimmage/include/scrimmage/plugins/sensor/AirSimSensor/settings.json .
</pre></div>
</div>
<p>Open the configuration file for the AirSimSensor SCRIMMAGE plugin, which is
located at:
/path/to/scrimmage/include/scrimmage/plugins/sensor/AirSimSensor/AirSimSensor.xml. Note
that the <code class="docutils literal notranslate"><span class="pre">airsim_ip</span></code> and <code class="docutils literal notranslate"><span class="pre">airsim_port</span></code> XML tags can be used to connect
to an AirSim instance on either the local computer or a remote networked
computer. <code class="docutils literal notranslate"><span class="pre">airsim_port</span></code> (from AirSimSensor.xml) and <code class="docutils literal notranslate"><span class="pre">ApiServerPort</span></code>
(from settings.json) should match. Multiple simulated cameras can be
configured through the <code class="docutils literal notranslate"><span class="pre">camera_config</span></code> example tag. This tag takes a list
of camera configurations, where each camera configuration is of the form:
<code class="docutils literal notranslate"><span class="pre">[CameraName</span> <span class="pre">ImageType</span> <span class="pre">CameraNumber</span> <span class="pre">Width</span> <span class="pre">Height]</span></code>. The following example
configures multiple simulated camera sensors:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;camera_config&gt;</span>
  [SceneForward Scene 0 256 144]
  [SceneDownward Scene 3 256 144]
  [DepthPlanner DepthPlanner 0 256 144]
  [DepthPerspective DepthPerspective 0 256 144]
  [DepthViz DepthVis 0 256 144]
  [DisparityNormalized DisparityNormalized 0 256 144]
  [Segmentation Segmentation 0 256 144]
  [SurfaceNormals SurfaceNormals 0 256 144]
<span class="nt">&lt;/camera_config&gt;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">CameraName</span></code> is an arbitrary string that can be used by SCRIMMAGE
plugins to identify camera images. The ImageType is a type defined by AirSim
that specifies the type of camera (optical, depth, segmentation, etc.). The
camera number refers to different camera translations and orientations on
the Unreal actor instance. 0 looks forward, 3 looks down, etc.</p>
</li>
<li><p><strong>Run a simulation with AirSim Camera Images</strong></p>
<p>After configuring settings.json and AirSimSensor.xml, you can run a
simulation. Use the UE4Editor to open the updated Blocks environment and
press “Play” to start the AirSim instance. Now, you can start the SCRIMMAGE
instance, which will move the AirSim actor, request images, and display the
images.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>scrimmage /path/to/scrimmage/missions/quad-airsim-ex1.xml
</pre></div>
</div>
<p>You should see camera images open in OpenCV windows when the SCRIMMAGE
simulation begins (hit ‘b’ to unpause, if necessary).</p>
</li>
</ol>
</div>
<div class="section" id="windows-linux-setup">
<h2>Windows / Linux Setup<a class="headerlink" href="#windows-linux-setup" title="Permalink to this headline">¶</a></h2>
<p>You can run the Unreal Engine on a Windows computer and SCRIMMAGE on a Linux
computer. Make sure that you use the same version of AirSim
across your systems. For example, at the time that this tutorial was written
we used AirSim version v1.2.2 and Unreal Engine 4.18.3. If using a different version
of AirSim please check AirSim’s Github Docs (<a class="reference external" href="https://microsoft.github.io/AirSim/docs/build_windows/">https://microsoft.github.io/AirSim/docs/build_windows/</a>)
for which version of Unreal Engine to use.</p>
<div class="section" id="linux">
<h3>Linux<a class="headerlink" href="#linux" title="Permalink to this headline">¶</a></h3>
<p>Ubuntu 18.04 is recommended. If you haven’t already installed SCRIMMAGE on your Linux machine, do so by following
directions here:(https://github.com/gtri/scrimmage). Also make sure that OpenCV is installed on your system. You will
need to pull the code for AirSim v1.2.2 and build the libstdc++ version of AirSim on your Linux
computer. Then build SCRIMMAGE with the AirSim SCRIMMAGE plugin.</p>
<ol class="arabic">
<li><p><strong>Build the libstdc++ version of AirSim (which will be loaded into SCRIMMAGE)</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># If using Ubuntu 16.04, you may need to update to CMake 3.10</span>
<span class="c1"># https://microsoft.github.io/AirSim/docs/cmake_linux/</span>
<span class="c1"># Only do this if the AirSim build fails and requests it because it can</span>
<span class="c1"># interfere with your ROS kinetic installation, read more here:</span>
<span class="c1"># https://askubuntu.com/questions/829310/how-to-upgrade-cmake-in-ubuntu</span>

<span class="c1"># go to folder where you clone GitHub projects</span>
git clone https://github.com/Microsoft/AirSim.git
<span class="nb">cd</span> AirSim
git checkout 1b10a49b004bf56195897813b6d3b4394b906f88

<span class="c1"># Select libstdc++ version build</span>
<span class="c1"># Open both ./setup.sh and ./build.sh and change &quot;gccBuild=false&quot; to &quot;gccBuild=true&quot;</span>
nano ./setup.sh
nano ./build.sh

<span class="c1"># Build</span>
./setup.sh
./build.sh
</pre></div>
</div>
</li>
<li><p><strong>Build SCRIMMAGE’s AirSimSensor Plugin</strong></p>
<p>Make sure you have successfully built the AirSim libraries (using libstdc++) in step 1. Go to
your scrimmage build directory and provide the location of the AirSim libraries to cmake.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /path/to/scrimmage
rm -rf build <span class="o">&amp;&amp;</span> mkdir build <span class="o">&amp;&amp;</span> <span class="nb">cd</span> build
cmake .. -DAIRSIM_ROOT_SEARCH<span class="o">=</span>/path/to/AirSim
make
</pre></div>
</div>
<p>Ensure that the <code class="docutils literal notranslate"><span class="pre">AirSimSensor_plugin</span></code> target built successfully.</p>
</li>
</ol>
</div>
<div class="section" id="windows">
<h3>Windows<a class="headerlink" href="#windows" title="Permalink to this headline">¶</a></h3>
<p>You will need to install Unreal Engine on Windows and build AirSim. Make sure that Visual Studio 2017 is also installed
with the packages mentioned below.</p>
<ol class="arabic">
<li><p><strong>Install VS17 and Unreal Engine</strong></p>
<ul class="simple">
<li><p>Install Unreal Engine 4.18 by following the directions for “Install Unreal Engine” here: (<a class="reference external" href="https://microsoft.github.io/AirSim/docs/build_windows/">https://microsoft.github.io/AirSim/docs/build_windows/</a>). Make sure to install Unreal 4.18 using the Epic Games launcher.</p></li>
<li><p>Make Sure Visual Studio 2017 is installed with <strong>VC++</strong> and <strong>Windows SDK 8.1</strong> packages.</p></li>
</ul>
</li>
<li><p><strong>Fetch AirSim</strong></p>
<p>Start the windows program <strong>x64 Native Tools Command Prompt for VS 2017</strong> – it MUST be used for running all batch files.
Clone the AirSim repo into or close to the <em>c:/ directory</em>, else you will receive errors during installation for file
names being too long.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># In &quot;x64 Native Tools Command Prompt for VS 2017&quot; NOT GitBash</span>
<span class="nb">cd</span> c:<span class="se">\</span>
git clone https://github.com/Microsoft/AirSim.git
<span class="nb">cd</span> AirSim <span class="o">&amp;&amp;</span> git checkout 1b10a49b004bf56195897813b6d3b4394b906f88
</pre></div>
</div>
</li>
<li><p><strong>Edit AirSim Build File</strong></p>
<p>The batch file <em>build.cmd</em> has an error so we will edit the file and fix it before we build.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># We will add a pause to the end of the file because else the script will exit,</span>
<span class="c1"># closing the window, very quickly after finishing even if there are build errors.</span>
<span class="c1"># Adding this pause will allow you to check that AirSim built successfully.</span>

<span class="c1"># Replace this code block from lines 185 to 194:</span>
<span class="c1">################################################### (Don&#39;t copy these ###&#39;s into the file)</span>
REM //---------- <span class="k">done</span> building ----------
<span class="nb">exit</span> /b <span class="m">0</span>

:buildfailed
echo<span class="o">(</span>
<span class="nb">echo</span> <span class="c1">#### Build failed - see messages above. 1&gt;&amp;2</span>

:buildfailed_nomsg
chdir /d %ROOT_DIR%
<span class="nb">exit</span> /b <span class="m">1</span>
<span class="c1">##################################################</span>

<span class="c1"># With this code block:</span>
<span class="c1">##################################################</span>
REM //---------- <span class="k">done</span> building ----------
REM // <span class="nb">exit</span> /b <span class="m">0</span>
goto :done

:buildfailed
chdir /d %ROOT_DIR%
echo<span class="o">(</span>
<span class="nb">echo</span> <span class="c1">#### Build failed - see messages above. 1&gt;&amp;2</span>
pause
<span class="nb">exit</span> /b <span class="m">1</span>

:done
pause
<span class="c1">###################################################</span>
</pre></div>
</div>
</li>
<li><p><strong>Build AirSim</strong></p>
<p>Start the windows program <strong>x64 Native Tools Command Prompt for VS 2017</strong> and build AirSim:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> C:<span class="se">\A</span>irSim
build.cmd
</pre></div>
</div>
</li>
<li><p><strong>SetUp Blocks Environment</strong></p>
<p>We will follow the Windows instructions here to setup the Blocks environment:
(<a class="reference external" href="https://microsoft.github.io/AirSim/docs/unreal_blocks/">https://microsoft.github.io/AirSim/docs/unreal_blocks/</a>).</p>
<p>Once you can run the AirSim simulation in Unreal, replace the settings.json in Windows:DocumentsAirSim
with the settings.json file in:
(https://github.com/gtri/scrimmage/blob/master/include/scrimmage/plugins/sensor/AirSimSensor/settings.json)
Now rebuild Blocks.sln which will launch Unreal, press play, if required choose quadcopter, and leave running.</p>
</li>
</ol>
</div>
<div class="section" id="start-scrimmage-on-linux-and-connect-to-airsim-unreal-on-windows">
<h3>Start Scrimmage on Linux and Connect to AirSim/Unreal on Windows<a class="headerlink" href="#start-scrimmage-on-linux-and-connect-to-airsim-unreal-on-windows" title="Permalink to this headline">¶</a></h3>
<p>Find the IP of the Windows machine that you are running AirSim/Unreal Engine and place it in the mission file
in scrimmage on your Linux machine. Run the mission in scrimmage, watch AirSim connect, and hit ‘b’ to start the
simulation.</p>
<ol class="arabic">
<li><p><strong>Edit Mission and Start Scrimmage on Linux Machine</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Open &quot;quad-airsim-ex1.xml&quot; in /scrimmage/missions directory</span>
<span class="nb">cd</span> /path/to/scrimmage/missions
<span class="c1"># change line 60 to your IP</span>
&lt;sensor <span class="nv">airsim_ip</span><span class="o">=</span><span class="s2">&quot;YOUR_IP&quot;</span>&gt;AirSimSensor&lt;/sensor&gt;
<span class="c1"># Save and run the mission</span>
scrimmage ./quad-airsim-ex1.xml
<span class="c1"># Should connect successfully</span>
<span class="c1"># hit &#39;b&#39; key to start simulation</span>
<span class="c1"># You should see 3 image streams appear in separate windows from the scrimmage window.</span>
<span class="c1"># for directions on how to control scrimmage see scrimmage github:</span>
<span class="c1"># (https://github.com/gtri/scrimmage)</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="save-images-and-get-lidar-data">
<h3>Save Images and Get LIDAR data<a class="headerlink" href="#save-images-and-get-lidar-data" title="Permalink to this headline">¶</a></h3>
<p>To save the images and quaternion pose CSV from the simulation for later processing into the SCRIMMAGE logs directory
set save_airsim_data=”true” in the scrimmage mission file quad-airsim-ex1.xml. The Scrimmage Logs directory should be
located in ~/.scrimmage/logs on the Linux side.</p>
<p>To retrieve LIDAR data from the simulation set get_lidar_data=”true” in the scrimmage mission file quad-airsim-ex1.xml.
LIDAR settings can be changed in the settings.json file on the Windows side located in DocumentsAirSim.
See (<a class="reference external" href="https://github.com/microsoft/AirSim/blob/master/docs/lidar.md">https://github.com/microsoft/AirSim/blob/master/docs/lidar.md</a>) for more details.
Variable DrawDebugPoints in the settings.json file will show the LIDAR pointcloud in the simulation, but it will also
appear in the saved images so by default it is set to false.</p>
<a class="reference internal image-reference" href="../_images/LIDAR_DrawDebugPoints.png"><img alt="../_images/LIDAR_DrawDebugPoints.png" src="../_images/LIDAR_DrawDebugPoints.png" style="width: 600px;" /></a>
</div>
<div class="section" id="add-asset-environments">
<h3>Add “Asset” Environments<a class="headerlink" href="#add-asset-environments" title="Permalink to this headline">¶</a></h3>
<p>AirSim offers different environments that can be played but not edited for every release version called <strong>“Assets”</strong>.
They can be found here: (<a class="reference external" href="https://github.com/Microsoft/AirSim/releases">https://github.com/Microsoft/AirSim/releases</a>). Download one of the Asset ZIP files under your
AirSim version (here we used LandscapeMountains under v1.2.2) onto the Windows machine and place in the
directory: c:/AirSim/Unreal/Environments/. Assets for newer versions of AirSim will not work with older versions of
AirSim installed across your Linux/Windows machines. Use 7-Zip to extract by selecting “Extract to &lt;ASSET_NAME&gt;&quot;.
Inside the folder you will find a &lt;ASSET_NAME&gt;.exe application. Double click the application file to start the
environment, choose “no” for quadcopter. The environment will start in full-screen. Now start the scrimmage mission
on your Linux machine using “scrimmage ./missions/quad-airsim-ex1.xml”. The scrimmage simulation will connect to
AirSim and control the car/ quadcopter in the new Asset environment. To end the simulation you will need to enter
the Task Manager by pressing CTRL+ALT+DELETE, select the Unreal process, and press “End Task”.</p>
<a class="reference internal image-reference" href="../_images/Asset_LandscapeMountains_1.png"><img alt="../_images/Asset_LandscapeMountains_1.png" src="../_images/Asset_LandscapeMountains_1.png" style="width: 600px;" /></a>
<a class="reference internal image-reference" href="../_images/Asset_LandscapeMountains_2.png"><img alt="../_images/Asset_LandscapeMountains_2.png" src="../_images/Asset_LandscapeMountains_2.png" style="width: 600px;" /></a>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="openai-plugin.html" class="btn btn-neutral float-right" title="Create an OpenAI Plugin" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ros-plugin.html" class="btn btn-neutral float-left" title="Create a ROS Node" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Kevin DeMarco

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>